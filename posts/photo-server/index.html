<!doctype html><html lang=en>
<head>
<title>Photo Server :: Parker's Projects</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="I wrote (and am still working on) this project primarily as a learning experience. If I just wanted a server I would probably (and already have) just wrote the server in javascript on node-js. The use of the sled KV database is nice because it has a good Rust interface and is designed for stateful services, and other embedded database bindings often miss features such as transaction support. Sled, however, isn&amp;rsquo;t 1.">
<meta name=keywords content>
<meta name=robots content="noodp">
<link rel=canonical href=/posts/photo-server/>
<link rel=stylesheet href=/assets/style.css>
<link rel=stylesheet href=/assets/blue.css>
<link rel=apple-touch-icon href=/img/apple-touch-icon-192x192.png>
<link rel="shortcut icon" href=/img/favicon/blue.png>
<meta name=twitter:card content="summary">
<meta property="og:locale" content="en">
<meta property="og:type" content="article">
<meta property="og:title" content="Photo Server">
<meta property="og:description" content="I wrote (and am still working on) this project primarily as a learning experience. If I just wanted a server I would probably (and already have) just wrote the server in javascript on node-js. The use of the sled KV database is nice because it has a good Rust interface and is designed for stateful services, and other embedded database bindings often miss features such as transaction support. Sled, however, isn&amp;rsquo;t 1.">
<meta property="og:url" content="/posts/photo-server/">
<meta property="og:site_name" content="Parker's Projects">
<meta property="og:image" content="/img/favicon/blue.png">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">
<meta property="article:published_time" content="2021-12-05 10:30:49 -0500 -0500">
</head>
<body class=blue>
<div class="container center headings--one-size">
<header class=header>
<div class=header__inner>
<div class=header__logo>
<a href=/>
<div class=logo>
inyo.dev
</div>
</a>
</div>
<div class=menu-trigger>menu</div>
</div>
<nav class=menu>
<ul class="menu__inner menu__inner--desktop">
<li><a href=https://github.com/huntingt>github</a></li>
</ul>
<ul class="menu__inner menu__inner--mobile">
<li><a href=https://github.com/huntingt>github</a></li>
</ul>
</nav>
</header>
<div class=content>
<div class=post>
<h1 class=post-title>
<a href=/posts/photo-server/>Photo Server</a></h1>
<div class=post-meta>
<span class=post-date>
2021-12-05
</span>
</div>
<div class=post-content><div>
<p>I wrote (and am still working on) this project primarily as a learning
experience. If I just wanted a server I would probably (and already have) just
wrote the server in javascript on node-js. The use of the sled KV database is
nice because it has a good Rust interface and is designed for stateful
services, and other embedded database bindings often miss features such as
transaction support. Sled, however, isn&rsquo;t 1.0 yet and doesn&rsquo;t have a guaranteed
file layout yet, and the serde KV database combination doesn&rsquo;t lend itself to
elegant database migrations. The intelligent choice would be to just use
something that supports SQL of course.</p>
<p>The system currently allows user creation, file upload, album creation, and
album sharing. The albums are based on Google Photo albums where photos are
grouped by day into sections which are lazily loaded into the frontend to allow
very large albums. Uploaded photos are thumbnailed by libvips into webp photos
(better compression than jpeg, and better support than AVIF). Videos are
thumbnailed using ffmpeg to grab the first frame of the video.</p>
<p>The frontend is a SPA built in solid-js, however, it currently lacks elegant
error handling and isn&rsquo;t pretty.</p>
<h1 id=links>Links<a href=#links class=hanchor arialabel=Anchor>&#8983;</a> </h1>
<ul>
<li>A read-only version of the server is <a href=http://inyo.dev>here</a>. The login email is
&ldquo;<a href=mailto:test@inyo.dev>test@inyo.dev</a>&rdquo; and the password is &ldquo;password&rdquo;. The server is hosted on a
raspberry pi on a dynamic ip address, so don&rsquo;t be surprised if it isn&rsquo;t
available.</li>
<li><a href=https://github.com/huntingt/photos>Source Code</a></li>
</ul>
</div></div>
<div class=pagination>
<div class=pagination__title>
<span class=pagination__title-h>Read other posts</span>
<hr>
</div>
<div class=pagination__buttons>
<span class="button previous">
<a href=/posts/audio-chat/>
<span class=button__icon>←</span>
<span class=button__text>Audio Chat</span>
</a>
</span>
</div>
</div>
</div>
</div>
<footer class=footer>
<div class=footer__inner>
<div class=copyright>
<span>© 2021 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span>
</div>
</div>
</footer>
<script src=/assets/main.js></script>
<script src=/assets/prism.js></script>
</div>
</body>
</html>